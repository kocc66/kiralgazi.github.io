<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üí£ Mayƒ±n Tarlasƒ±</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        h1 {
            text-align: center;
            color: #e74c3c;
            font-size: 42px;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .setup {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
        }

        .setup-row {
            display: flex;
            gap: 20px;
            margin-bottom: 15px;
            flex-wrap: wrap;
            align-items: center;
        }

        .setup-group {
            flex: 1;
            min-width: 200px;
        }

        label {
            display: block;
            font-weight: bold;
            margin-bottom: 8px;
            color: #2c3e50;
            font-size: 16px;
        }

        select, input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            background: white;
        }

        .players-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        .player-card {
            padding: 20px;
            border-radius: 12px;
            color: white;
            text-align: center;
            font-weight: bold;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .player-card.active {
            transform: scale(1.05);
            box-shadow: 0 8px 16px rgba(0,0,0,0.4);
        }

        .player-card.dead {
            opacity: 0.3;
            filter: grayscale(1);
        }

        .player-name {
            font-size: 20px;
            margin-bottom: 10px;
        }

        .player-lives {
            font-size: 28px;
            margin: 10px 0;
        }

        .turn-info {
            text-align: center;
            background: #3498db;
            color: white;
            padding: 15px;
            border-radius: 10px;
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .board {
            display: grid;
            gap: 5px;
            background: #34495e;
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 25px;
            justify-content: center;
        }

        .cell {
            width: 50px;
            height: 50px;
            background: #95a5a6;
            border: 2px solid #7f8c8d;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
        }

        .cell:hover {
            transform: scale(1.1);
            background: #bdc3c7;
        }

        .cell.open {
            background: #ecf0f1;
            cursor: default;
        }

        .cell.mine {
            background: #e74c3c;
            animation: boom 0.5s;
        }

        @keyframes boom {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.3); }
        }

        .buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        button {
            padding: 15px 30px;
            font-size: 18px;
            font-weight: bold;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
        }

        .btn-start {
            background: #2ecc71;
            color: white;
        }

        .btn-reset {
            background: #e74c3c;
            color: white;
        }

        .winner {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 50px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 0 100px rgba(0,0,0,0.5);
            display: none;
            z-index: 1000;
        }

        .winner.show {
            display: block;
            animation: popup 0.5s;
        }

        @keyframes popup {
            0% { transform: translate(-50%, -50%) scale(0); }
            100% { transform: translate(-50%, -50%) scale(1); }
        }

        .winner h2 {
            font-size: 48px;
            color: #f39c12;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üí£ MAYIN TARLASI üí£</h1>

        <div class="setup">
            <div class="setup-row">
                <div class="setup-group">
                    <label>Oyuncu Sayƒ±sƒ±:</label>
                    <select id="playerCount">
                        <option value="2">2 Ki≈üi</option>
                        <option value="3">3 Ki≈üi</option>
                        <option value="4" selected>4 Ki≈üi</option>
                    </select>
                </div>
                <div class="setup-group">
                    <label>Mayƒ±n Sayƒ±sƒ±:</label>
                    <select id="mineCount">
                        <option value="10">10 Mayƒ±n (Kolay)</option>
                        <option value="20" selected>20 Mayƒ±n (Orta)</option>
                        <option value="30">30 Mayƒ±n (Zor)</option>
                        <option value="40">40 Mayƒ±n (√áok Zor)</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="players-grid" id="playersGrid"></div>

        <div class="turn-info" id="turnInfo">Oyunu ba≈ülatmak i√ßin START'a bas!</div>

        <div class="board" id="board"></div>

        <div class="buttons">
            <button class="btn-start" onclick="startGame()">üéÆ START</button>
            <button class="btn-reset" onclick="resetGame()">üîÑ YENƒ∞DEN</button>
        </div>
    </div>

    <div class="winner" id="winner">
        <h2 id="winnerText"></h2>
    </div>

    <script>
        const colors = ['#e74c3c', '#3498db', '#2ecc71', '#f39c12'];
        let players = [];
        let currentPlayer = 0;
        let gameActive = false;
        let board = [];
        let mines = [];
        const SIZE = 10;

        function setupPlayers() {
            const count = parseInt(document.getElementById('playerCount').value);
            players = [];
            for (let i = 0; i < count; i++) {
                players.push({
                    name: `OYUNCU ${i + 1}`,
                    color: colors[i],
                    lives: 3,
                    dead: false
                });
            }
            updatePlayersDisplay();
        }

        function updatePlayersDisplay() {
            const grid = document.getElementById('playersGrid');
            grid.innerHTML = '';
            players.forEach((p, i) => {
                const card = document.createElement('div');
                card.className = 'player-card';
                if (i === currentPlayer && gameActive) card.classList.add('active');
                if (p.dead) card.classList.add('dead');
                card.style.background = p.color;
                
                const hearts = '‚ù§Ô∏è'.repeat(p.lives) + 'üñ§'.repeat(3 - p.lives);
                card.innerHTML = `
                    <div class="player-name">${p.name}</div>
                    <div class="player-lives">${hearts}</div>
                    <div>${p.dead ? '‚ò†Ô∏è √ñLD√ú' : '‚úì YA≈ûIYOR'}</div>
                `;
                grid.appendChild(card);
            });
        }

        function initBoard() {
            board = [];
            for (let i = 0; i < SIZE; i++) {
                board[i] = [];
                for (let j = 0; j < SIZE; j++) {
                    board[i][j] = {
                        mine: false,
                        open: false,
                        number: 0
                    };
                }
            }

            // Mayƒ±nlarƒ± yerle≈ütir
            const mineCount = parseInt(document.getElementById('mineCount').value);
            let placed = 0;
            while (placed < mineCount) {
                const r = Math.floor(Math.random() * SIZE);
                const c = Math.floor(Math.random() * SIZE);
                if (!board[r][c].mine) {
                    board[r][c].mine = true;
                    placed++;
                }
            }

            // Sayƒ±larƒ± hesapla
            for (let i = 0; i < SIZE; i++) {
                for (let j = 0; j < SIZE; j++) {
                    if (!board[i][j].mine) {
                        let count = 0;
                        for (let di = -1; di <= 1; di++) {
                            for (let dj = -1; dj <= 1; dj++) {
                                const ni = i + di;
                                const nj = j + dj;
                                if (ni >= 0 && ni < SIZE && nj >= 0 && nj < SIZE && board[ni][nj].mine) {
                                    count++;
                                }
                            }
                        }
                        board[i][j].number = count;
                    }
                }
            }
        }

        function drawBoard() {
            const boardEl = document.getElementById('board');
            boardEl.innerHTML = '';
            boardEl.style.gridTemplateColumns = `repeat(${SIZE}, 50px)`;

            for (let i = 0; i < SIZE; i++) {
                for (let j = 0; j < SIZE; j++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    cell.onclick = () => clickCell(i, j);
                    
                    if (board[i][j].open) {
                        cell.classList.add('open');
                        if (board[i][j].mine) {
                            cell.classList.add('mine');
                            cell.textContent = 'üí£';
                        } else if (board[i][j].number > 0) {
                            cell.textContent = board[i][j].number;
                            cell.style.color = ['#3498db','#2ecc71','#e74c3c','#9b59b6','#f39c12','#1abc9c','#e67e22','#34495e'][board[i][j].number - 1];
                        }
                    }
                    
                    boardEl.appendChild(cell);
                }
            }
        }

        function clickCell(r, c) {
            if (!gameActive || board[r][c].open || players[currentPlayer].dead) return;

            board[r][c].open = true;

            if (board[r][c].mine) {
                // Mayƒ±na bastƒ±!
                players[currentPlayer].lives--;
                if (players[currentPlayer].lives <= 0) {
                    players[currentPlayer].dead = true;
                }
                drawBoard();
                updatePlayersDisplay();
                
                setTimeout(() => {
                    if (checkWinner()) return;
                    nextPlayer();
                }, 1000);
            } else {
                // G√ºvenli
                if (board[r][c].number === 0) {
                    openAround(r, c);
                }
                drawBoard();
                nextPlayer();
            }
        }

        function openAround(r, c) {
            for (let di = -1; di <= 1; di++) {
                for (let dj = -1; dj <= 1; dj++) {
                    const ni = r + di;
                    const nj = c + dj;
                    if (ni >= 0 && ni < SIZE && nj >= 0 && nj < SIZE && !board[ni][nj].open && !board[ni][nj].mine) {
                        board[ni][nj].open = true;
                        if (board[ni][nj].number === 0) {
                            openAround(ni, nj);
                        }
                    }
                }
            }
        }

        function nextPlayer() {
            do {
                currentPlayer = (currentPlayer + 1) % players.length;
            } while (players[currentPlayer].dead);
            
            updatePlayersDisplay();
            updateTurnInfo();
        }

        function updateTurnInfo() {
            const info = document.getElementById('turnInfo');
            if (gameActive) {
                info.textContent = `${players[currentPlayer].name} SIRA SENDE!`;
                info.style.background = players[currentPlayer].color;
            } else {
                info.textContent = 'Oyunu ba≈ülatmak i√ßin START\'a bas!';
                info.style.background = '#3498db';
            }
        }

        function checkWinner() {
            const alive = players.filter(p => !p.dead);
            if (alive.length === 1) {
                gameActive = false;
                const winner = document.getElementById('winner');
                document.getElementById('winnerText').textContent = `üèÜ ${alive[0].name} KAZANDI! üèÜ`;
                winner.classList.add('show');
                return true;
            }
            return false;
        }

        function startGame() {
            setupPlayers();
            initBoard();
            currentPlayer = 0;
            gameActive = true;
            drawBoard();
            updateTurnInfo();
            document.getElementById('winner').classList.remove('show');
        }

        function resetGame() {
            startGame();
        }

        // ƒ∞lk y√ºkleme
        setupPlayers();
        initBoard();
        drawBoard();
        updateTurnInfo();
    </script>
</body>
</html>